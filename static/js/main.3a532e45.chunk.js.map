{"version":3,"sources":["store/models/index.ts","store/models/common.ts","store/models/room.ts","store/models/chat.ts","store/index.ts","pages/Home/components/Typo3D/index.jsx","modules/socket.ts","pages/Home/components/Image3D/index.tsx","pages/Home/components/Clouds/index.tsx","pages/Home/components/Earth/index.tsx","pages/Home/components/CameraControl/index.jsx","pages/Home/index.tsx","components/PageTemplate/index.tsx","modules/event.ts","pages/Room/containers/ChatContainer.tsx","pages/Room/containers/GateContainer.tsx","modules/utils.ts","pages/Room/containers/SocketContainer.tsx","pages/Room/containers/UserListContainer.tsx","pages/Room/index.tsx","pages/Setting/index.tsx","core/tools/tool.ts","core/tools/pen.ts","pages/PracticeRoom/components/ColorPicker/index.tsx","pages/PracticeRoom/components/ToolSizeSelector/index.tsx","pages/PracticeRoom/index.tsx","App.tsx","index.tsx"],"names":["models","common","createModel","state","selectors","slice","createSelector","reducers","increment","payload","effects","dispatch","incrementAsync","count","room","isConnectedSocket","isJoined","userInfo","participants","setSocketState","setJoinedState","setUserInfo","updateParticipants","chat","chatList","addChat","push","store","init","plugins","immerPlugin","selectPlugin","select","extend","TextGeometry","SocketMessageType","Typo3D","children","style","vAlign","hAlign","size","color","props","font","useLoader","FontLoader","config","useMemo","height","curveSegments","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","mesh","useRef","useEffect","current","geometry","center","ref","scale","attach","args","shininess","Image3D","position","materialImgs","useTexture","Array","map","_","i","useFrame","rotation","x","y","material","index","attachArray","Clouds","radius","earthClouds","cloudsRef","clock","elapsedTime","transparent","alphaMap","opacity","Earth","earthSpecular","specularMap","specular","Color","Stars","depth","factor","saturation","fade","VEC","THREE","CameraControl","useState","isAction","setIsAction","camera","lerp","set","timer","setTimeout","clearTimeout","Home","className","fov","fallback","TrackballControls","panSpeed","minDistance","maxDistance","to","w","h","colorScheme","fontWeight","variant","PageTemplate","id","roomId","senderId","socket","io","transports","event","EventEmitter","ChatContainer","useSelector","useDispatch","listWrapRef","textRef","handleScrollToBottom","useCallback","$listWrap","scrollTop","scrollHeight","handleSendMessage","message","value","isMine","nickName","type","body","data","send","sendMessage","Chat","handleKeyUp","e","shiftKey","key","preventDefault","handleKeyDown","findParticipantInfo","userId","find","onChat","removeAllListeners","on","margin","bg","borderRadius","boxShadow","direction","padding","cn","mine","justifyContent","placeholder","background","resize","onKeyDown","onKeyUp","onClick","GateContainer","inputRef","handleEnterRoom","uuidv4","profileUrl","emit","window","localStorage","setItem","alert","defaultNickName","getItem","flex","alignItems","textAlign","fontSize","mb","maxLength","defaultValue","required","SocketContainer","onGateIn","console","log","onJoinUser","onLeaveUser","onMessage","bindSocket","setupBaseInfo","UserListContainer","length","src","ml","Room","useParams","createBreakpoints","sm","md","lg","xl","p","maxW","templateRows","templateColumns","gap","rowSpan","colSpan","mt","base","PROFILE_CHARACTERS","Setting","navigate","useNavigate","enterRoom","drawTime","setDrawTime","round","setRound","myProfileIdx","setMyProfileIdx","controls","useAnimation","start","transition","delay","stiffness","velocity","default","duration","getRandomProfile","randomIdx","Math","floor","random","handlePrevProfile","handleNextProfile","isPrevDisabled","isNextDisabled","userName","setUserName","handleUserName","target","isUserName","centerContent","spacing","as","onInput","aria-label","icon","disabled","motion","div","animate","rightIcon","onChange","Tool","canvas","context","isDragging","cursor","enabled","mouseDownHandler","mouseMoveHandler","mouseUpHandler","this","onMousedown","bind","onMousemove","onMouseup","beginPath","error","beforeDo","doIt","afterDo","closePath","warn","registerEventHander","newConf","unregisterEventHandler","addEventListener","removeEventListener","offsetX","offsetY","do","Pen","fillStyle","penSize","centerX","centerY","ellipse","PI","fill","ColorPicker","initialColor","colorChangeCallback","setColor","onColorChange","currentColor","ToolSizeSelector","initialSize","incrementSize","minSize","maxSize","Infinity","sizeChangeCallback","setSize","onSizeChangeButtonClick","s","nextSize","onSizeInputChange","currentSize","PracticeRoom","canvasRef","currentTool","setCurrentTool","getContext","lastTool","disable","enable","canvasWidth","innerWidth","canvasHeight","innerHeight","onSizeChange","setConfig","width","App","path","element","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3a532e45.chunk.js","sourcesContent":["import { Models } from '@rematch/core';\nimport { common } from './common';\nimport { room } from './room';\nimport { chat } from './chat';\n\nexport interface RootModel extends Models<RootModel> {\n  common: typeof common;\n  room: typeof room;\n  chat: typeof chat;\n}\n\nexport const models: RootModel = { common, room, chat };\n","import { createModel } from '@rematch/core';\nimport { RootModel } from './';\n\nexport const common = createModel<RootModel>()({\n  state: 0,\n  selectors: (slice, createSelector) => ({\n    state() {\n      return slice;\n    },\n  }),\n  reducers: {\n    increment(state, payload: number) {\n      return state + payload;\n    },\n  },\n  effects: (dispatch) => ({\n    incrementAsync(payload: number, state) {\n      dispatch.count.increment(payload);\n    },\n  }),\n});\n","import { createModel } from '@rematch/core';\nimport { RootModel } from './';\n\ninterface RoomState {\n  isConnectedSocket: boolean;\n  isJoined: boolean;\n  userInfo: Record<string, any> | null;\n  participants: Record<string, any>[];\n}\n\nconst initialState: RoomState = {\n  isConnectedSocket: false,\n  isJoined: false,\n  userInfo: null,\n  participants: [],\n};\n\nexport const room = createModel<RootModel>()({\n  state: initialState,\n  selectors: (slice) => ({\n    state: () => slice,\n  }),\n  reducers: {\n    setSocketState(state, payload: boolean) {\n      state.isConnectedSocket = payload;\n      return state;\n    },\n    setJoinedState(state, payload: boolean) {\n      state.isJoined = payload;\n      return state;\n    },\n    setUserInfo(state, payload: Record<string, any>) {\n      state.userInfo = payload;\n      return state;\n    },\n    updateParticipants(state, payload: Record<string, any>[]) {\n      state.participants = payload;\n      return state;\n    },\n  },\n});\n","import { createModel } from '@rematch/core';\nimport { RootModel } from './';\n\ninterface ChatMessage {\n  nickName: string;\n  message: string;\n  isMine?: boolean;\n}\n\ninterface ChatState {\n  chatList: ChatMessage[];\n}\n\nconst initialState: ChatState = {\n  chatList: [],\n};\n\nexport const chat = createModel<RootModel>()({\n  state: initialState,\n  selectors: (slice) => ({\n    state: () => slice,\n  }),\n  reducers: {\n    addChat(state, payload: ChatMessage) {\n      state.chatList.push(payload);\n      return state;\n    },\n  },\n});\n","import { init, RematchDispatch, RematchRootState } from '@rematch/core';\nimport { models, RootModel } from './models';\nimport immerPlugin from '@rematch/immer';\nimport selectPlugin from '@rematch/select';\n\nexport const store = init<RootModel>({\n  models,\n  plugins: [immerPlugin(), selectPlugin()],\n});\n\n// REF: https://rematchjs.org/docs/plugins/select/#3-selector-examples\nexport const { select } = store;\n\nexport type Store = typeof store;\nexport type Dispatch = RematchDispatch<RootModel>;\nexport type RootState = RematchRootState<RootModel>;\n","import { useRef, useMemo, useEffect } from 'react';\nimport { extend, useLoader } from '@react-three/fiber';\nimport { FontLoader } from 'three/examples/jsm/loaders/FontLoader';\nimport { TextGeometry } from 'three/examples/jsm/geometries/TextGeometry';\nextend({ TextGeometry });\n\nconst fontsrc = 'fonts/Jua_Regular.json';\n\nconst Typo3D = ({\n  children,\n  style = '',\n  vAlign = 'center',\n  hAlign = 'center',\n  size = 1,\n  color = '#000000',\n  ...props\n}) => {\n  const font = useLoader(FontLoader, fontsrc);\n\n  const config = useMemo(\n    () => ({\n      font,\n      size: 3,\n      height: 0.5, //앞뒤 두께감\n      curveSegments: 2, //너무 높게하면 리렌더링 오래걸림\n      bevelEnabled: true,\n      bevelThickness: 1,\n      bevelSize: 0.1,\n      bevelOffset: 0.01,\n      bevelSegments: 10,\n    }),\n    [font]\n  );\n\n  /** 센터 정렬 */\n  const mesh = useRef(null);\n  useEffect(() => {\n    if (mesh.current) {\n      mesh.current.children[0].geometry.center();\n    }\n  }, [children]);\n\n  return (\n    <group ref={mesh} {...props} scale={[0.1 * size, 0.1 * size, 0.1]}>\n      <mesh>\n        <textGeometry attach=\"geometry\" args={[children, config]} />\n        <meshPhongMaterial shininess={200} color={color} attach=\"material\" />\n      </mesh>\n    </group>\n  );\n};\n\nexport default Typo3D;\n","import io from 'socket.io-client';\nimport { isNodeProdcution } from 'modules/env';\n\nconst SOCKET_SERVER = isNodeProdcution ? 'ws://localhost:3001/picasso' : 'ws://localhost:3001/picasso';\n\nlet roomId: string | null = null;\nlet senderId: string | null = null;\n\nexport const socket = io(SOCKET_SERVER, {\n  transports: ['websocket'],\n});\n\ninterface SocketInitData {\n  roomId: string;\n  userId: string;\n}\n\nexport enum SocketMessageType {\n  Chat = 'Chat',\n  Draw = 'Draw',\n}\n\nexport const setupBaseInfo = ({ roomId: id, userId }: SocketInitData) => {\n  roomId = id;\n  senderId = userId;\n};\n\nexport const sendMessage = ({\n  type,\n  body,\n  to = 'all',\n}: {\n  type: SocketMessageType;\n  to?: 'all' | string;\n  body: any;\n}) => {\n  const data = {\n    roomId,\n    senderId,\n    to,\n    type,\n    body,\n  };\n\n  socket.send(data);\n};\n\nexport default socket;\n","import * as THREE from 'three';\nimport { useRef } from 'react';\nimport { useFrame } from '@react-three/fiber';\nimport { useTexture } from '@react-three/drei';\n\ninterface Props {\n  position?: [number, number, number];\n  size?: number;\n}\n\nconst Image3D = ({ position, size = 1 }: Props) => {\n  const ref = useRef<THREE.Mesh>();\n\n  const materialImgs = useTexture([...Array(6)].map((_, i) => `textures/cube${i + 1}.jpg`));\n\n  useFrame(() => {\n    ref.current!.rotation.x += 0.005;\n    ref.current!.rotation.y += 0.005;\n  });\n\n  return (\n    <mesh ref={ref} position={position} scale={1}>\n      <boxGeometry args={[size, size, size]} />\n      {materialImgs.map((material, index) => {\n        return <meshBasicMaterial key={index} attachArray=\"material\" map={material} />;\n      })}\n    </mesh>\n  );\n};\nexport default Image3D;\n","import { useRef } from 'react';\nimport { Sphere, useTexture } from '@react-three/drei';\nimport { useFrame } from '@react-three/fiber';\nimport { Mesh } from 'three';\ninterface Props {\n  radius: number;\n  position?: [number, number, number];\n}\n\nconst Clouds = ({ radius, position }: Props) => {\n  const [earthClouds] = useTexture(['textures/earth-clouds.jpg']);\n  const cloudsRef = useRef<Mesh>(null);\n\n  useFrame(({ clock }) => {\n    if (!cloudsRef.current) return;\n    cloudsRef.current.rotation.y = clock.elapsedTime * 0.02;\n  });\n\n  return (\n    <Sphere ref={cloudsRef} args={[radius + 0.05, 32, 32]}>\n      <meshPhongMaterial transparent alphaMap={earthClouds} opacity={0.5} />\n    </Sphere>\n  );\n};\n\nexport default Clouds;\n","import * as THREE from 'three';\nimport { Color } from 'three';\nimport { useRef } from 'react';\nimport { Sphere, Stars, useTexture } from '@react-three/drei';\nimport { useFrame } from '@react-three/fiber';\nimport Clouds from '../Clouds';\n\ninterface Props {\n  radius: number;\n  position?: [number, number, number];\n}\n\nconst Earth = ({ radius = 1, position }: Props) => {\n  const ref = useRef<THREE.Mesh>();\n\n  const [earthSpecular] = useTexture(['textures/earth-specular.jpg']);\n\n  useFrame(() => {\n    ref.current!.rotation.y += 0.001;\n  });\n\n  return (\n    <group ref={ref} position={position} scale={1}>\n      <Clouds radius={radius} />\n      <Sphere args={[radius, 32, 32]}>\n        <meshPhongMaterial\n          attach=\"material\"\n          color=\"#489396\"\n          shininess={5}\n          map={earthSpecular}\n          specularMap={earthSpecular}\n          specular={new Color('#2BC6CF')}\n        />\n      </Sphere>\n      <Stars radius={100} depth={50} count={3000} factor={6} saturation={0} fade />\n    </group>\n  );\n};\n\nexport default Earth;\n","import * as THREE from 'three';\nimport { useEffect, useState } from 'react';\nimport { useFrame } from '@react-three/fiber';\n\nconst VEC = new THREE.Vector3();\nconst STEP_VALUE = 0.06;\n\nconst CameraControl = () => {\n  const [isAction, setIsAction] = useState(true);\n\n  useFrame((state) => {\n    isAction && state.camera.position.lerp(VEC.set(0, 0, 12), STEP_VALUE);\n  });\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setIsAction(false);\n    }, 1500);\n    return () => clearTimeout(timer);\n  }, []);\n\n  return <mesh />;\n};\n\nexport default CameraControl;\n","import { Suspense } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Button } from '@chakra-ui/react';\nimport { Canvas } from '@react-three/fiber';\nimport { TrackballControls } from '@react-three/drei'; //7.0.1 써 에러x\n\nimport Typo3D from './components/Typo3D';\nimport Image3D from './components/Image3D';\nimport Earth from './components/Earth';\nimport CameraControl from './components/CameraControl';\n\nimport './index.scss';\n\nconst Home = () => {\n  return (\n    <div className=\"home-wrap\">\n      <Canvas camera={{ position: [20, 20, 300], fov: 30 }}>\n        <ambientLight />\n        <pointLight position={[10, 10, 10]} />\n\n        <Suspense fallback={null}>\n          <Image3D size={1.2} position={[0, 0.1, 0]} />\n          <mesh position={[0, 1.8, 0]}>\n            <Typo3D hAlign=\"left\" color={'#0e978c'} size={1.4} children=\"Picasso\" />\n          </mesh>\n\n          <Earth radius={2} position={[0, -3.4, 0]} />\n          <CameraControl />\n        </Suspense>\n\n        <TrackballControls panSpeed={0.4} minDistance={9} maxDistance={40} />\n      </Canvas>\n\n      <Link to=\"/setting\">\n        <Button w=\"250px\" h=\"60px\" colorScheme=\"yellow\" size=\"lg\" fontWeight=\"bold\" variant=\"solid\">\n          START\n        </Button>\n      </Link>\n    </div>\n  );\n};\n\nexport default Home;\n","import React from 'react';\nimport './index.scss';\n\ninterface Props {\n  children: React.ReactNode;\n  id?: string;\n}\n\nconst PageTemplate = ({ children, id }: Props) => {\n  return (\n    <div className=\"page-template\" id={id}>\n      {children}\n    </div>\n  );\n};\n\nexport default PageTemplate;\n","import EventEmitter from 'events';\n\nconst event = new EventEmitter();\n\nexport default event;\n","import { useCallback, useEffect, useRef } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Dispatch, select } from 'store';\n\nimport { Flex, Box, Textarea, Button } from '@chakra-ui/react';\nimport { sendMessage, SocketMessageType } from 'modules/socket';\nimport event from 'modules/event';\nimport cn from 'classnames';\n\nconst ChatContainer = () => {\n  const { userInfo, participants } = useSelector(select.room.state);\n  const { chatList } = useSelector(select.chat.state);\n  const dispatch = useDispatch<Dispatch>();\n  const listWrapRef = useRef<HTMLDivElement>(null);\n  const textRef = useRef<HTMLTextAreaElement>(null);\n\n  const handleScrollToBottom = useCallback(() => {\n    const $listWrap = listWrapRef.current;\n    if (!$listWrap) {\n      return;\n    }\n\n    $listWrap.scrollTop = $listWrap.scrollHeight;\n  }, [listWrapRef]);\n\n  const handleSendMessage = useCallback(() => {\n    const message = textRef.current?.value;\n\n    if (!textRef.current || !message) {\n      return;\n    }\n\n    dispatch.chat.addChat({\n      isMine: true,\n      nickName: userInfo?.nickName,\n      message,\n    });\n\n    sendMessage({\n      type: SocketMessageType.Chat,\n      body: message,\n    });\n\n    textRef.current.value = '';\n    setTimeout(() => handleScrollToBottom(), 0);\n  }, [dispatch, userInfo, handleScrollToBottom]);\n\n  const handleKeyUp = useCallback(\n    (e) => {\n      if (e.shiftKey) {\n        return;\n      }\n\n      if (e.key === 'Enter') {\n        e.preventDefault();\n        handleSendMessage();\n      }\n    },\n    [handleSendMessage]\n  );\n\n  // NOTE: 한글 마지막 글자 두번 처리되는이슈로 keydown에서도 이벤트 핸들링 필요\n  const handleKeyDown = useCallback((e) => {\n    if (e.shiftKey) {\n      return;\n    }\n\n    if (e.key === 'Enter') {\n      e.preventDefault();\n    }\n  }, []);\n\n  const findParticipantInfo = useCallback(\n    (userId: string) => {\n      return participants.find((data) => data.userId === userId);\n    },\n    [participants]\n  );\n\n  const onChat = useCallback(\n    ({ senderId, body }) => {\n      const nickName = findParticipantInfo(senderId)?.nickName ?? null;\n      if (nickName) {\n        dispatch.chat.addChat({\n          nickName,\n          message: body,\n        });\n\n        setTimeout(() => handleScrollToBottom(), 0);\n      }\n    },\n    [dispatch, findParticipantInfo, handleScrollToBottom]\n  );\n\n  useEffect(() => {\n    event.removeAllListeners('chat');\n    event.on('chat', onChat);\n  }, [onChat]);\n\n  return (\n    <Box margin=\"5px\" bg=\"rgba(255,255,255,0.92)\" color=\"#000\" borderRadius=\"5px\" boxShadow=\"10px\">\n      <Flex direction=\"column\">\n        <Box className=\"chat-list-wrap\" padding=\"15px 12px 0 12px\" ref={listWrapRef}>\n          <ul>\n            {chatList.map(({ isMine, nickName, message }, i) => (\n              <li className={cn({ mine: isMine })} key={i}>\n                <p className=\"nickname\">{nickName}</p>\n                <p className=\"body\">{message}</p>\n              </li>\n            ))}\n          </ul>\n        </Box>\n        <Box className=\"chat-input-wrap\" bg=\"rgba(0,0,0,0.1)\" padding=\"5px\">\n          <Flex h=\"100%\" justifyContent=\"space-between\">\n            <Textarea\n              placeholder=\"메시지를 입력해주세요!\"\n              background=\"#fff\"\n              resize=\"none\"\n              onKeyDown={handleKeyDown}\n              onKeyUp={handleKeyUp}\n              ref={textRef}\n            />\n            <Button w=\"72px\" h=\"100%\" colorScheme=\"yellow\" variant=\"solid\" color=\"#fff\" onClick={handleSendMessage}>\n              Send\n            </Button>\n          </Flex>\n        </Box>\n      </Flex>\n    </Box>\n  );\n};\n\nexport default ChatContainer;\n","import { useCallback, useRef } from 'react';\nimport { Flex, Box, Input, Button, Text } from '@chakra-ui/react';\n\nimport { useDispatch } from 'react-redux';\nimport { Dispatch } from 'store';\nimport { getUuid } from 'modules/utils';\nimport socket from 'modules/socket';\n\ninterface Props {\n  roomId: string;\n}\n\nconst GateContainer = ({ roomId }: Props) => {\n  const dispatch = useDispatch<Dispatch>();\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const handleEnterRoom = useCallback(() => {\n    const nickName = inputRef.current?.value;\n    if (!nickName) {\n      alert('닉네임을 입력해주세요!');\n      return;\n    }\n\n    const userInfo = {\n      userId: getUuid(),\n      nickName,\n      profileUrl: 'profileUrl',\n    };\n\n    socket.emit('join', { roomId, userInfo });\n    dispatch.room.setUserInfo(userInfo);\n    dispatch.room.setJoinedState(true);\n    window.localStorage.setItem('nickName', nickName);\n  }, [dispatch, roomId, inputRef]);\n\n  const handleKeyDown = useCallback(\n    (e) => {\n      if (e.key === 'Enter') {\n        e.preventDefault();\n        handleEnterRoom();\n      }\n    },\n    [handleEnterRoom]\n  );\n\n  const defaultNickName = localStorage.getItem('nickName') || '';\n\n  return (\n    <Box flex=\"1\" className=\"gate-container\">\n      <Flex h=\"90%\" color=\"white\" direction=\"column\" justifyContent=\"center\" alignItems=\"center\">\n        <Box w=\"260px\" textAlign=\"center\" color=\"facebook.900\">\n          <Text fontSize=\"xl\" mb=\"5\">\n            프로필 설정\n          </Text>\n          <Input\n            placeholder=\"닉네임을 입력해주세요!\"\n            maxLength={15}\n            mb=\"2\"\n            size=\"lg\"\n            defaultValue={defaultNickName}\n            textAlign=\"center\"\n            ref={inputRef}\n            onKeyDown={handleKeyDown}\n            required\n          />\n          <Button colorScheme=\"yellow\" w=\"100%\" size=\"lg\" onClick={handleEnterRoom}>\n            입장하기\n          </Button>\n        </Box>\n      </Flex>\n    </Box>\n  );\n};\n\nexport default GateContainer;\n","import { v4 as uuidv4 } from 'uuid';\nimport { throttle } from 'lodash-es';\nimport randomWord from 'random-words';\n\nconst REPEAT_HOLD_TIME = 1000;\nconst THROTTLE_OPTIONS = {\n  trailing: false, // throttle 후행 이벤트 발동 설정\n};\n\n/**\n * UUID를 반환합니다.\n */\nexport const getUuid = () => {\n  return uuidv4();\n};\n\n/**\n * 룸ID에 사용할 랜덤한 단어를 반환합니다.\n */\nexport const getRandomRoomId = (count: number = 1) => {\n  return randomWord(count).join('-');\n};\n\n/**\n * 이벤트 쓰로틀이 적용된 함수를 반환합니다.\n */\nexport const getThrottledFunc = (func: any) => {\n  return throttle(func, REPEAT_HOLD_TIME, THROTTLE_OPTIONS);\n};\n","import { useCallback, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Dispatch, select } from 'store';\n\nimport socket, { setupBaseInfo } from 'modules/socket';\nimport event from 'modules/event';\n\nconst SocketContainer = ({ roomId }: { roomId: string }) => {\n  const { userInfo } = useSelector(select.room.state);\n  const dispatch = useDispatch<Dispatch>();\n\n  const onGateIn = useCallback(\n    ({ participants }) => {\n      console.log('onGateIn', participants);\n      dispatch.room.setSocketState(true);\n      dispatch.room.updateParticipants(participants);\n    },\n    [dispatch]\n  );\n\n  const onJoinUser = useCallback(\n    (data) => {\n      console.log('onJoinUser', data);\n      dispatch.room.updateParticipants(data.participants);\n      event.emit('join', data);\n    },\n    [dispatch]\n  );\n\n  const onLeaveUser = useCallback(\n    (data) => {\n      console.log('onLeaveUser', data);\n      dispatch.room.updateParticipants(data.participants);\n      event.emit('leave', data);\n    },\n    [dispatch]\n  );\n\n  const onMessage = useCallback((message: { type: string }) => {\n    console.log('onMessage', message);\n    event.emit(message.type, message);\n  }, []);\n\n  const bindSocket = useCallback(() => {\n    socket.emit('gate', roomId);\n    socket.on('gate', onGateIn);\n    socket.on('join', onJoinUser);\n    socket.on('leave', onLeaveUser);\n    socket.on('message', onMessage);\n  }, [roomId, onGateIn, onJoinUser, onLeaveUser, onMessage]);\n\n  useEffect(() => {\n    if (!userInfo) {\n      return;\n    }\n\n    const { userId } = userInfo;\n    setupBaseInfo({ roomId, userId });\n  }, [roomId, userInfo]);\n\n  useEffect(() => {\n    bindSocket();\n  }, [bindSocket]);\n\n  return null;\n};\n\nexport default SocketContainer;\n","import { useSelector } from 'react-redux';\nimport { select } from 'store';\nimport { Flex, Box, Avatar, Badge, Text } from '@chakra-ui/react';\n\nconst UserListContainer = () => {\n  const { participants } = useSelector(select.room.state);\n\n  return (\n    <div>\n      <Text>참여자목록 ({participants.length})</Text>\n      <ul>\n        {participants.map(({ nickName }) => {\n          return (\n            <li>\n              <Flex bg=\"white\" margin={1} padding={2}>\n                <Avatar src=\"https://bit.ly/sage-adebayo\" />\n                <Box ml=\"3\">\n                  <Text fontWeight=\"bold\">{nickName}</Text>\n                  <Badge ml=\"1\" colorScheme=\"green\">\n                    점수: 0\n                  </Badge>\n                </Box>\n              </Flex>\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n};\n\nexport default UserListContainer;\n","import { Container, Heading, Flex, Grid, GridItem, Text } from '@chakra-ui/react';\nimport { createBreakpoints } from '@chakra-ui/theme-tools';\n\nimport { useParams } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { select } from 'store';\n\nimport PageTemplate from 'components/PageTemplate';\nimport { SocketContainer, GateContainer, ChatContainer, UserListContainer } from './containers';\n\nimport './index.scss';\n\nconst Room = () => {\n  const { roomId = '' } = useParams();\n  const { isJoined } = useSelector(select.room.state);\n\n  createBreakpoints({\n    sm: '480px',\n    md: '768px',\n    lg: '1024px',\n    xl: '1280px',\n  });\n\n  return (\n    <PageTemplate id=\"room\">\n      <SocketContainer roomId={roomId} />\n\n      {isJoined ? (\n        <Container p={0} maxW=\"100%\">\n          <Grid h=\"100vh\" templateRows=\"repeat(8, 1fr)\" templateColumns=\"repeat(8, 1fr)\" gap={2}>\n            <GridItem rowSpan={1} colSpan={8} bg=\"tomato\">\n              <Heading mt={1} mb={1} textAlign=\"center\" fontSize={20} color=\"#000\">\n                room/{roomId}\n              </Heading>\n            </GridItem>\n\n            <GridItem rowSpan={{ base: 1, xl: 7 }} colSpan={{ base: 8, xl: 2 }} bg=\"gray.600\">\n              <UserListContainer />\n            </GridItem>\n\n            <GridItem rowSpan={{ base: 4, md: 7 }} colSpan={{ base: 8, md: 5, xl: 4 }} bg=\"white\">\n              <Text fontSize=\"6xl\" color=\"#000\">\n                drawing~\n              </Text>\n            </GridItem>\n\n            <GridItem rowSpan={{ base: 2, md: 7 }} colSpan={{ base: 8, md: 3, xl: 2 }} bg=\"teal\">\n              <ChatContainer />\n            </GridItem>\n          </Grid>\n        </Container>\n      ) : (\n        <Flex h=\"100%\" color=\"white\">\n          <GateContainer roomId={roomId} />\n        </Flex>\n      )}\n    </PageTemplate>\n  );\n};\n\nexport default Room;\n","import React, { useState, useCallback, useEffect, useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Container,\n  Heading,\n  Stack,\n  Box,\n  Input,\n  Button,\n  RadioGroup,\n  Radio,\n  Divider,\n  Grid,\n  GridItem,\n  IconButton,\n  Text,\n} from '@chakra-ui/react';\nimport { BsArrowRightCircleFill, BsArrowLeft, BsArrowRight } from 'react-icons/bs';\nimport { GiPerspectiveDiceSixFacesRandom } from 'react-icons/gi';\nimport { motion, useAnimation } from 'framer-motion';\n\nimport PageTemplate from '../../components/PageTemplate';\n\nimport './index.scss';\n\nconst PROFILE_CHARACTERS = ['🐶', '🐱', '🐰', '🦊', '🐨', '🐼', '🐯', '🐥', '🐷'];\n\nconst roomId = 'abc';\n\nconst Setting = () => {\n  const navigate = useNavigate();\n  const enterRoom = useCallback(() => {\n    navigate(`/room/${roomId}`);\n  }, [navigate]);\n\n  const [drawTime, setDrawTime] = useState('60');\n  const [round, setRound] = useState('10');\n  const [myProfileIdx, setMyProfileIdx] = useState(1);\n\n  // 프로필 설정 애니메이션\n  const controls = useAnimation();\n  useEffect(() => {\n    controls.start({\n      opacity: [0.5, 1],\n      scale: [0.7, 1.1, 1],\n      y: [15, -10, 0],\n      transition: {\n        delay: 1,\n        x: { type: 'spring', stiffness: 50, velocity: 50 },\n        default: { duration: 0.5 },\n      },\n    });\n  }, [myProfileIdx, controls]);\n\n  const getRandomProfile = useCallback(() => {\n    const randomIdx = Math.floor(Math.random() * PROFILE_CHARACTERS.length);\n    setMyProfileIdx(randomIdx);\n  }, [setMyProfileIdx]);\n\n  const handlePrevProfile = useCallback(() => {\n    setMyProfileIdx((myProfileIdx) => myProfileIdx - 1);\n  }, [setMyProfileIdx]);\n\n  const handleNextProfile = useCallback(() => {\n    setMyProfileIdx((myProfileIdx) => myProfileIdx + 1);\n  }, [setMyProfileIdx]);\n\n  const isPrevDisabled = useMemo(() => myProfileIdx === 0, [myProfileIdx]);\n  const isNextDisabled = useMemo(() => myProfileIdx === PROFILE_CHARACTERS.length - 1, [myProfileIdx]);\n\n  /**\n   * @TODO\n   * 닉네임 입력\n   * - 입장하기 버튼 활성화 조건 체크\n   * - 중복여부\n   */\n  const [userName, setUserName] = useState('');\n  const handleUserName = useCallback(\n    (e) => {\n      setUserName(e.target.value);\n    },\n    [setUserName]\n  );\n\n  const isUserName = useMemo(() => userName !== '', [userName]);\n\n  return (\n    <PageTemplate id=\"setting\">\n      <Container p=\"25px\" centerContent>\n        <Box maxW=\"3xl\">\n          <Stack spacing={5}>\n            <Heading as=\"h1\" size=\"xl\">\n              프로필 설정\n            </Heading>\n            <Input onInput={handleUserName} value={userName} variant=\"outline\" placeholder=\"닉네임\" />\n\n            <Grid templateColumns=\"repeat(5, 1fr)\" alignItems=\"center\" gap={6}>\n              <IconButton\n                colorScheme=\"teal\"\n                aria-label=\"이전\"\n                icon={<BsArrowLeft />}\n                disabled={isPrevDisabled}\n                onClick={handlePrevProfile}\n              />\n              <GridItem colSpan={3} textAlign=\"center\">\n                <motion.div animate={controls}>\n                  <Text fontSize=\"7xl\">{PROFILE_CHARACTERS[myProfileIdx]}</Text>\n                </motion.div>\n              </GridItem>\n\n              <IconButton\n                colorScheme=\"teal\"\n                aria-label=\"다음\"\n                icon={<BsArrowRight />}\n                disabled={isNextDisabled}\n                onClick={handleNextProfile}\n              />\n            </Grid>\n            <Button\n              rightIcon={<GiPerspectiveDiceSixFacesRandom />}\n              onClick={getRandomProfile}\n              colorScheme=\"teal\"\n              size=\"lg\"\n              variant=\"outline\"\n            >\n              랜덤 프로필\n            </Button>\n          </Stack>\n\n          <Stack spacing={5} mt={50}>\n            <Heading as=\"h2\" size=\"md\">\n              게임 설정\n            </Heading>\n\n            <Divider />\n            <Grid templateColumns=\"repeat(2, 1fr)\" gap={6}>\n              <Heading as=\"h3\" size=\"sm\">\n                그리는 시간\n              </Heading>\n\n              <RadioGroup colorScheme=\"teal\" onChange={setDrawTime} value={drawTime}>\n                <Stack direction=\"row\" spacing={5}>\n                  <Radio value=\"30\">30초</Radio>\n                  <Radio value=\"60\">1분</Radio>\n                  <Radio value=\"120\">2분</Radio>\n                </Stack>\n              </RadioGroup>\n            </Grid>\n\n            <Grid templateColumns=\"repeat(2, 1fr)\" gap={6}>\n              <Heading as=\"h3\" size=\"sm\">\n                라운드 수\n              </Heading>\n\n              <RadioGroup colorScheme=\"teal\" onChange={setRound} value={round}>\n                <Stack direction=\"row\" spacing={5}>\n                  <Radio value=\"5\">5</Radio>\n                  <Radio value=\"10\">10</Radio>\n                  <Radio value=\"15\">15</Radio>\n                </Stack>\n              </RadioGroup>\n            </Grid>\n\n            <Button\n              rightIcon={<BsArrowRightCircleFill />}\n              colorScheme=\"teal\"\n              size=\"lg\"\n              variant=\"solid\"\n              onClick={enterRoom}\n              disabled={!isUserName}\n            >\n              입장하기\n            </Button>\n          </Stack>\n        </Box>\n      </Container>\n    </PageTemplate>\n  );\n};\n\nexport default Setting;\n","type Cursor = {\n  x: number;\n  y: number;\n};\n\nexport type Config = Record<string, any>;\n\ntype ToolConstructorParams = {\n  canvas: HTMLCanvasElement;\n  context: CanvasRenderingContext2D;\n  config?: Config;\n};\n\nexport type DoItParams = {\n  context: CanvasRenderingContext2D;\n  config?: Config;\n  cursor: Cursor;\n};\n\ntype MouseEventHandler = (e: MouseEvent) => void;\n\nexport class Tool {\n  private context: CanvasRenderingContext2D;\n  private canvas: HTMLCanvasElement;\n  private config: Config | undefined;\n  private isDragging = false;\n  private cursor: Cursor = {\n    x: -1,\n    y: -1,\n  };\n  private enabled = false;\n  private mouseDownHandler: MouseEventHandler | null = null;\n  private mouseMoveHandler: MouseEventHandler | null = null;\n  private mouseUpHandler: MouseEventHandler | null = null;\n\n  constructor({ canvas, context, config }: ToolConstructorParams) {\n    this.canvas = canvas;\n    this.context = context;\n    this.config = config;\n    this.init();\n  }\n\n  init() {\n    this.mouseDownHandler = this.onMousedown.bind(this);\n    this.mouseMoveHandler = this.onMousemove.bind(this);\n    this.mouseUpHandler = this.onMouseup.bind(this);\n  }\n\n  beforeDo() {\n    if (!this.context) {\n      console.error('컨텍스트를 찾을 수 없습니다.');\n      return;\n    }\n\n    this.context.beginPath();\n  }\n\n  do() {\n    this.beforeDo();\n    this.doIt({\n      context: this.context,\n      config: this.config,\n      cursor: this.cursor,\n    });\n    this.afterDo();\n  }\n\n  afterDo() {\n    if (!this.context) {\n      console.error('컨텍스트를 찾을 수 없습니다.');\n      return;\n    }\n\n    this.context.closePath();\n  }\n\n  doIt({ context, config, cursor }: DoItParams) {\n    console.warn('It must be implemented!');\n  }\n\n  enable() {\n    if (this.enabled) {\n      return;\n    }\n\n    this.enabled = true;\n    this.registerEventHander();\n  }\n\n  setConfig(config: Config) {\n    const newConf = {\n      ...this.config,\n      ...config,\n    };\n\n    this.config = newConf;\n  }\n\n  disable() {\n    if (!this.enabled) {\n      return;\n    }\n\n    this.enabled = false;\n    this.unregisterEventHandler();\n  }\n\n  registerEventHander() {\n    if (!(this.mouseDownHandler && this.mouseMoveHandler && this.mouseUpHandler)) {\n      return;\n    }\n\n    this.canvas.addEventListener('mousedown', this.mouseDownHandler);\n    this.canvas.addEventListener('mousemove', this.mouseMoveHandler);\n    this.canvas.addEventListener('mouseup', this.mouseUpHandler);\n  }\n\n  unregisterEventHandler() {\n    if (!(this.mouseDownHandler && this.mouseMoveHandler && this.mouseUpHandler)) {\n      return;\n    }\n\n    this.canvas.removeEventListener('mousedown', this.mouseDownHandler);\n    this.canvas.removeEventListener('mousemove', this.mouseMoveHandler);\n    this.canvas.removeEventListener('mouseup', this.mouseUpHandler);\n  }\n\n  onMousedown(e: MouseEvent) {\n    console.log(e);\n    const { offsetX: x, offsetY: y } = e;\n    this.isDragging = true;\n\n    this.cursor = {\n      x,\n      y,\n    };\n\n    this.do();\n  }\n\n  onMousemove(e: MouseEvent) {\n    if (!this.isDragging) {\n      return;\n    }\n\n    const { offsetX: x, offsetY: y } = e;\n\n    this.cursor = {\n      x,\n      y,\n    };\n\n    this.do();\n  }\n\n  onMouseup(e: MouseEvent) {\n    this.isDragging = false;\n  }\n\n  dispose() {\n    this.unregisterEventHandler();\n    this.mouseDownHandler = null;\n    this.mouseMoveHandler = null;\n    this.mouseUpHandler = null;\n  }\n}\n","import { Tool, DoItParams } from './tool';\n\nconst PEN_SIZE_FACTOR = 1;\nconst DEFAULT_FILL_COLOR = 'black';\n\nexport class Pen extends Tool {\n  doIt({ context, cursor, config }: DoItParams) {\n    const size = config?.['size'];\n    const fillStyle = config?.['color'] || DEFAULT_FILL_COLOR;\n\n    const penSize = size * PEN_SIZE_FACTOR;\n    const { x, y } = cursor;\n\n    const centerX = x - penSize / 2;\n    const centerY = y - penSize / 2;\n\n    context.fillStyle = fillStyle;\n    context.ellipse(centerX, centerY, penSize, penSize, 0, 0, 2 * Math.PI);\n    context.fill();\n  }\n}\n","import { ChangeEvent, useCallback, useEffect, useState } from 'react';\nimport './index.scss';\n\ntype Props = {\n  initialColor?: string;\n  colorChangeCallback?: (color: string) => void;\n};\n\nconst ColorPicker = ({ initialColor = 'black', colorChangeCallback }: Props) => {\n  const [color, setColor] = useState<string>(initialColor);\n\n  const onColorChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    const currentColor = e.target.value;\n    setColor(currentColor);\n  }, []);\n\n  useEffect(() => {\n    colorChangeCallback?.(color);\n  }, [colorChangeCallback, color]);\n\n  return (\n    <div className=\"color-picker\">\n      <input type=\"color\" onChange={onColorChange} value={color} />\n    </div>\n  );\n};\n\nexport default ColorPicker;\n","import { ChangeEvent, useCallback, useEffect, useState } from 'react';\nimport './index.scss';\n\ntype Props = {\n  initialSize?: number;\n  incrementSize?: number;\n  minSize?: number;\n  maxSize?: number;\n  sizeChangeCallback?: (size: number) => void;\n};\n\nconst ToolSizeSelector = ({\n  initialSize = 1,\n  incrementSize = 1,\n  minSize = 1,\n  maxSize = Infinity,\n  sizeChangeCallback,\n}: Props) => {\n  const [size, setSize] = useState<number>(initialSize);\n\n  const onSizeChangeButtonClick = useCallback(\n    (direction: 'forward' | 'backward') => {\n      setSize((s) => {\n        const nextSize = s + (direction === 'backward' ? incrementSize * -1 : incrementSize);\n\n        if (minSize > nextSize) {\n          return minSize;\n        }\n        if (nextSize > maxSize) {\n          return maxSize;\n        }\n\n        return nextSize;\n      });\n    },\n    [setSize, incrementSize, minSize, maxSize]\n  );\n\n  const onSizeInputChange = useCallback(\n    (e: ChangeEvent<HTMLInputElement>) => {\n      const currentSize = +e.target.value;\n      if (minSize > currentSize) {\n        setSize(minSize);\n        return;\n      }\n      if (currentSize < maxSize) {\n        return setSize(maxSize);\n      }\n\n      setSize(currentSize);\n    },\n    [minSize, maxSize]\n  );\n\n  useEffect(() => {\n    sizeChangeCallback?.(size);\n  }, [sizeChangeCallback, size]);\n\n  return (\n    <div className=\"tool-size-selector\">\n      <button className=\"minus\" onClick={() => onSizeChangeButtonClick('backward')}>\n        -\n      </button>\n      <input type=\"number\" onChange={onSizeInputChange} value={size} />\n      <button className=\"plus\" onClick={() => onSizeChangeButtonClick('forward')}>\n        +\n      </button>\n    </div>\n  );\n};\n\nexport default ToolSizeSelector;\n","import { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport PageTemplate from 'components/PageTemplate';\nimport { Pen, Tool } from 'core/tools';\nimport ColorPicker from './components/ColorPicker';\nimport ToolSizeSelector from './components/ToolSizeSelector';\n\nimport './index.scss';\n\nconst PracticeRoom = () => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const [currentTool, setCurrentTool] = useState<Tool | undefined>();\n\n  useEffect(() => {\n    if (!canvasRef.current) {\n      return;\n    }\n\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n\n    if (!context) {\n      console.error('컨텍스트를 가져오는데에 실패하였습니다.');\n      return;\n    }\n\n    setCurrentTool((lastTool: Tool | undefined) => {\n      lastTool?.disable();\n\n      return new Pen({\n        canvas,\n        context,\n        config: {\n          size: 5,\n        },\n      });\n    });\n  }, [setCurrentTool]);\n\n  useEffect(() => {\n    currentTool?.enable();\n  }, [currentTool]);\n\n  const { canvasWidth, canvasHeight } = useMemo(() => {\n    return {\n      canvasWidth: window.innerWidth * 0.8,\n      canvasHeight: window.innerHeight * 0.8,\n    };\n  }, []);\n\n  const onSizeChange = useCallback(\n    (size: number) => {\n      currentTool?.setConfig({\n        size,\n      });\n    },\n    [currentTool]\n  );\n\n  const onColorChange = useCallback(\n    (color: string) => {\n      currentTool?.setConfig({\n        color,\n      });\n    },\n    [currentTool]\n  );\n\n  return (\n    <PageTemplate id=\"practice-room\">\n      <div>\n        <canvas ref={canvasRef} width={canvasWidth} height={canvasHeight} />\n      </div>\n      <ToolSizeSelector sizeChangeCallback={onSizeChange} />\n      <ColorPicker colorChangeCallback={onColorChange} />\n    </PageTemplate>\n  );\n};\n\nexport default PracticeRoom;\n","import { Provider } from 'react-redux';\nimport { Routes, Route } from 'react-router-dom';\nimport { ChakraProvider } from '@chakra-ui/react';\nimport { store } from './store';\nimport Home from 'pages/Home';\nimport Room from 'pages/Room';\nimport Setting from 'pages/Setting';\nimport PracticeRoom from 'pages/PracticeRoom';\n\nconst App = () => {\n  return (\n    <Provider store={store}>\n      <ChakraProvider>\n        <Routes>\n          <Route path=\"/\" element={<Home />} />\n          <Route path=\"/room/:roomId\" element={<Room />} />\n          <Route path=\"/setting\" element={<Setting />} />\n          <Route path=\"/practice-room\" element={<PracticeRoom />} />\n        </Routes>\n      </ChakraProvider>\n    </Provider>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport App from './App';\n\nimport './styles/index.scss';\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}