{"version":3,"sources":["store/models/common.ts","store/models/index.ts","store/models/room.ts","store/index.ts","pages/Home/components/Typo3D/index.jsx","pages/Home/components/Image3D/index.tsx","pages/Home/components/Clouds/index.tsx","pages/Home/components/Earth/index.tsx","pages/Home/components/CameraControl/index.jsx","pages/Home/index.tsx","components/PageTemplate/index.tsx","pages/Room/index.tsx","pages/Setting/index.tsx","core/tools/tool.ts","core/tools/pen.ts","pages/PracticeRoom/components/ColorPicker/index.tsx","pages/PracticeRoom/components/ToolSizeSelector/index.tsx","pages/PracticeRoom/index.tsx","App.tsx","index.tsx"],"names":["common","createModel","state","selectors","slice","createSelector","reducers","increment","payload","effects","dispatch","incrementAsync","count","models","room","isEnteredRoom","isConnectedSocket","userInfo","participants","videos","chatList","localVideoState","find","info","userId","updateSocketConnectionState","updateEnteredRoomState","setParticipants","arr","values","setUserInfo","addVideo","push","updateVideoEnabled","forEach","video","videoEnabled","enabled","addChat","store","init","plugins","immerPlugin","selectPlugin","select","extend","TextGeometry","Typo3D","children","style","vAlign","hAlign","size","color","props","font","useLoader","FontLoader","config","useMemo","height","curveSegments","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","mesh","useRef","useEffect","current","geometry","center","ref","scale","attach","args","shininess","Image3D","position","materialImgs","useTexture","Array","map","_","i","useFrame","rotation","x","y","material","index","attachArray","Clouds","radius","earthClouds","cloudsRef","clock","elapsedTime","transparent","alphaMap","opacity","Earth","earthSpecular","specularMap","specular","Color","Stars","depth","factor","saturation","fade","CameraControl","vec","THREE","useState","isAction","setIsAction","camera","lerp","set","timer","setTimeout","clearTimeout","Home","className","fov","fallback","TrackballControls","panSpeed","minDistance","maxDistance","to","w","h","colorScheme","fontWeight","variant","PageTemplate","id","Room","createBreakpoints","sm","md","lg","xl","p","maxW","templateRows","templateColumns","gap","rowSpan","colSpan","bg","mt","mb","textAlign","fontSize","base","PROFILE_CHARACTERS","Setting","navigate","useNavigate","enterRoom","useCallback","drawTime","setDrawTime","round","setRound","myProfileIdx","setMyProfileIdx","controls","useAnimation","start","transition","delay","type","stiffness","velocity","default","duration","getRandomProfile","randomIdx","Math","floor","random","length","handlePrevProfile","handleNextProfile","isPrevDisabled","isNextDisabled","userName","setUserName","handleUserName","e","target","value","isUserName","centerContent","spacing","as","onInput","placeholder","alignItems","aria-label","icon","disabled","onClick","motion","div","animate","rightIcon","onChange","direction","Tool","canvas","context","isDragging","cursor","mouseDownHandler","mouseMoveHandler","mouseUpHandler","this","onMousedown","bind","onMousemove","onMouseup","beginPath","console","error","beforeDo","doIt","afterDo","closePath","warn","registerEventHander","newConf","unregisterEventHandler","addEventListener","removeEventListener","log","offsetX","offsetY","do","Pen","fillStyle","penSize","centerX","centerY","ellipse","PI","fill","ColorPicker","initialColor","colorChangeCallback","setColor","onColorChange","currentColor","ToolSizeSelector","initialSize","incrementSize","minSize","maxSize","Infinity","sizeChangeCallback","setSize","onSizeChangeButtonClick","s","nextSize","onSizeInputChange","currentSize","PracticeRoom","canvasRef","currentTool","setCurrentTool","getContext","lastTool","disable","enable","canvasWidth","window","innerWidth","canvasHeight","innerHeight","onSizeChange","setConfig","width","App","path","element","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.cd79d0a6.chunk.js","sourcesContent":["import { createModel } from '@rematch/core';\nimport { RootModel } from './';\n\nexport const common = createModel<RootModel>()({\n  state: 0,\n  selectors: (slice, createSelector) => ({\n    state() {\n      return slice;\n    },\n  }),\n  reducers: {\n    increment(state, payload: number) {\n      return state + payload;\n    },\n  },\n  effects: (dispatch) => ({\n    incrementAsync(payload: number, state) {\n      dispatch.count.increment(payload);\n    },\n  }),\n});\n","import { Models } from '@rematch/core';\nimport { common } from './common';\nimport { room } from './room';\n\nexport interface RootModel extends Models<RootModel> {\n  common: typeof common;\n  room: typeof room;\n}\n\nexport const models: RootModel = { common, room };\n","import { createModel } from '@rematch/core';\nimport { RootModel } from './';\nimport { values } from 'lodash-es';\n\ninterface VideoState {\n  userId: string;\n  stream: MediaStream;\n  videoEnabled: boolean;\n  audioEnabled: boolean;\n}\ninterface ChatState {\n  nickName: string;\n  message: string;\n  isMine?: boolean;\n}\ninterface RoomState {\n  isEnteredRoom: boolean;\n  isConnectedSocket: boolean;\n  userInfo: any | null;\n  participants: any[];\n  videos: VideoState[];\n  chatList: ChatState[];\n}\n\nconst initialState: RoomState = {\n  isEnteredRoom: false,\n  isConnectedSocket: false,\n  userInfo: null,\n  participants: [],\n  videos: [],\n  chatList: [],\n};\n\nexport const room = createModel<RootModel>()({\n  state: initialState,\n  selectors: (slice, createSelector) => ({\n    state: () => slice,\n    localVideoState: () =>\n      createSelector(slice, ({ userInfo, videos }) => {\n        if (userInfo) {\n          return videos.find((info) => info.userId === userInfo.userId);\n        }\n        return null;\n      }),\n  }),\n  reducers: {\n    updateSocketConnectionState(state, payload: boolean) {\n      state.isConnectedSocket = payload;\n      return state;\n    },\n    updateEnteredRoomState(state, payload: boolean) {\n      state.isEnteredRoom = payload;\n      return state;\n    },\n    setParticipants(state, payload: {}) {\n      const arr = values(payload);\n      state.participants = arr;\n      return state;\n    },\n    setUserInfo(state, payload: {}) {\n      state.userInfo = payload;\n      return state;\n    },\n    addVideo(state, payload: VideoState) {\n      state.videos.push(payload);\n      return state;\n    },\n    updateVideoEnabled(state, payload: { userId: string; enabled: boolean }) {\n      state.videos.forEach((video) => {\n        if (video.userId === payload.userId) {\n          video.videoEnabled = payload.enabled;\n        }\n      });\n      return state;\n    },\n    addChat(state, payload: ChatState) {\n      state.chatList.push(payload);\n      return state;\n    },\n  },\n  effects: (dispatch) => ({\n    incrementAsync(payload: number, state) {\n      dispatch.count.increment(payload);\n    },\n  }),\n});\n","import { init, RematchDispatch, RematchRootState } from '@rematch/core';\nimport { models, RootModel } from './models';\nimport immerPlugin from '@rematch/immer';\nimport selectPlugin from '@rematch/select';\n\nexport const store = init<RootModel>({\n  models,\n  plugins: [immerPlugin(), selectPlugin()],\n});\n\n// REF: https://rematchjs.org/docs/plugins/select/#3-selector-examples\nexport const { select } = store;\n\nexport type Store = typeof store;\nexport type Dispatch = RematchDispatch<RootModel>;\nexport type RootState = RematchRootState<RootModel>;\n","import { useRef, useMemo, useEffect } from 'react';\nimport { extend, useLoader } from '@react-three/fiber';\nimport { FontLoader } from 'three/examples/jsm/loaders/FontLoader';\nimport { TextGeometry } from 'three/examples/jsm/geometries/TextGeometry';\nextend({ TextGeometry });\n\nconst fontsrc = 'fonts/Jua_Regular.json';\n\nconst Typo3D = ({\n  children,\n  style = '',\n  vAlign = 'center',\n  hAlign = 'center',\n  size = 1,\n  color = '#000000',\n  ...props\n}) => {\n  const font = useLoader(FontLoader, fontsrc);\n\n  const config = useMemo(\n    () => ({\n      font,\n      size: 3,\n      height: 0.5, //앞뒤 두께감\n      curveSegments: 2, //너무 높게하면 리렌더링 오래걸림\n      bevelEnabled: true,\n      bevelThickness: 1,\n      bevelSize: 0.1,\n      bevelOffset: 0.01,\n      bevelSegments: 10,\n    }),\n    [font]\n  );\n\n  /** 센터 정렬 */\n  const mesh = useRef(null);\n  useEffect(() => {\n    if (mesh.current) {\n      mesh.current.children[0].geometry.center();\n    }\n  }, [children]);\n\n  return (\n    <group ref={mesh} {...props} scale={[0.1 * size, 0.1 * size, 0.1]}>\n      <mesh>\n        <textGeometry attach=\"geometry\" args={[children, config]} />\n        <meshPhongMaterial shininess={200} color={color} attach=\"material\" />\n      </mesh>\n    </group>\n  );\n};\n\nexport default Typo3D;\n","import * as THREE from 'three';\nimport { useRef } from 'react';\nimport { useFrame } from '@react-three/fiber';\nimport { useTexture } from '@react-three/drei';\n\ninterface Props {\n  position?: [number, number, number];\n  size?: number;\n}\n\nconst Image3D = ({ position, size = 1 }: Props) => {\n  const ref = useRef<THREE.Mesh>();\n\n  const materialImgs = useTexture([...Array(6)].map((_, i) => `textures/cube${i + 1}.jpg`));\n\n  useFrame(() => {\n    ref.current!.rotation.x += 0.005;\n    ref.current!.rotation.y += 0.005;\n  });\n\n  return (\n    <mesh ref={ref} position={position} scale={1}>\n      <boxGeometry args={[size, size, size]} />\n      {materialImgs.map((material, index) => {\n        return <meshBasicMaterial key={index} attachArray=\"material\" map={material} />;\n      })}\n    </mesh>\n  );\n};\nexport default Image3D;\n","import { useRef } from 'react';\nimport { Sphere, useTexture } from '@react-three/drei';\nimport { useFrame } from '@react-three/fiber';\nimport { Mesh } from 'three';\ninterface Props {\n  radius: number;\n  position?: [number, number, number];\n}\n\nconst Clouds = ({ radius, position }: Props) => {\n  const [earthClouds] = useTexture(['textures/earth-clouds.jpg']);\n  const cloudsRef = useRef<Mesh>(null);\n\n  useFrame(({ clock }) => {\n    if (!cloudsRef.current) return;\n    cloudsRef.current.rotation.y = clock.elapsedTime * 0.02;\n  });\n\n  return (\n    <Sphere ref={cloudsRef} args={[radius + 0.05, 32, 32]}>\n      <meshPhongMaterial transparent alphaMap={earthClouds} opacity={0.5} />\n    </Sphere>\n  );\n};\n\nexport default Clouds;\n","import * as THREE from 'three';\nimport { Color } from 'three';\nimport { useRef } from 'react';\nimport { Sphere, Stars, useTexture } from '@react-three/drei';\nimport { useFrame } from '@react-three/fiber';\nimport Clouds from '../Clouds';\n\ninterface Props {\n  radius: number;\n  position?: [number, number, number];\n}\n\nconst Earth = ({ radius = 1, position }: Props) => {\n  const ref = useRef<THREE.Mesh>();\n\n  const [earthSpecular] = useTexture(['textures/earth-specular.jpg']);\n\n  useFrame(() => {\n    ref.current!.rotation.y += 0.001;\n  });\n\n  return (\n    <group ref={ref} position={position} scale={1}>\n      <Clouds radius={radius} />\n      <Sphere args={[radius, 32, 32]}>\n        <meshPhongMaterial\n          attach=\"material\"\n          color=\"#489396\"\n          shininess={5}\n          map={earthSpecular}\n          specularMap={earthSpecular}\n          specular={new Color('#2BC6CF')}\n        />\n      </Sphere>\n      <Stars radius={100} depth={50} count={3000} factor={6} saturation={0} fade />\n    </group>\n  );\n};\n\nexport default Earth;\n","import * as THREE from 'three';\nimport { useEffect, useState } from 'react';\nimport { useFrame } from '@react-three/fiber';\n\nconst CameraControl = () => {\n  const vec = new THREE.Vector3();\n  const step = 0.06;\n  const [isAction, setIsAction] = useState(true);\n\n  useFrame((state) => {\n    isAction && state.camera.position.lerp(vec.set(0, 0, 12), step);\n  });\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setIsAction(false);\n    }, 1500);\n    return () => clearTimeout(timer);\n  }, []);\n\n  return <mesh />;\n};\n\nexport default CameraControl;\n","import { Suspense } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Button } from '@chakra-ui/react';\nimport { Canvas } from '@react-three/fiber';\nimport { TrackballControls } from '@react-three/drei'; //7.0.1 써 에러x\n\nimport Typo3D from './components/Typo3D';\nimport Image3D from './components/Image3D';\nimport Earth from './components/Earth';\nimport CameraControl from './components/CameraControl';\n\nimport './index.scss';\n\nconst Home = () => {\n  return (\n    <div className=\"home-wrap\">\n      <Canvas camera={{ position: [20, 20, 300], fov: 30 }}>\n        <ambientLight />\n        <pointLight position={[10, 10, 10]} />\n\n        <Suspense fallback={null}>\n          <Image3D size={1.2} position={[0, 0.1, 0]} />\n          <mesh position={[0, 1.8, 0]}>\n            <Typo3D hAlign=\"left\" color={'#0e978c'} size={1.4} children=\"Picasso\" />\n          </mesh>\n\n          <Earth radius={2} position={[0, -3.4, 0]} />\n          <CameraControl />\n        </Suspense>\n\n        <TrackballControls panSpeed={0.4} minDistance={9} maxDistance={40} />\n      </Canvas>\n\n      <Link to=\"/setting\">\n        <Button w=\"250px\" h=\"60px\" colorScheme=\"yellow\" size=\"lg\" fontWeight=\"bold\" variant=\"solid\">\n          START\n        </Button>\n      </Link>\n    </div>\n  );\n};\n\nexport default Home;\n","import React from 'react';\nimport './index.scss';\n\ninterface Props {\n  children: React.ReactNode;\n  id?: string;\n}\n\nconst PageTemplate = ({ children, id }: Props) => {\n  return (\n    <div className=\"page-template\" id={id}>\n      {children}\n    </div>\n  );\n};\n\nexport default PageTemplate;\n","\nimport { Container, Heading, Grid, GridItem, Text } from '@chakra-ui/react';\nimport { createBreakpoints } from '@chakra-ui/theme-tools';\nimport PageTemplate from 'components/PageTemplate';\n\nimport './index.scss';\n\nconst Room = () => {\n  createBreakpoints({\n    sm: '480px',\n    md: '768px',\n    lg: '1024px',\n    xl: '1280px',\n  });\n\n  return (\n    <PageTemplate id=\"room\">\n      <Container p={0} maxW=\"100%\">\n        <Grid h=\"100vh\" templateRows=\"repeat(8, 1fr)\" templateColumns=\"repeat(8, 1fr)\" gap={2}>\n          <GridItem rowSpan={1} colSpan={8} bg=\"tomato\">\n            <Heading mt={10} mb={10} textAlign=\"center\" fontSize={40} color=\"#000\">\n              ROOM\n            </Heading>\n          </GridItem>\n\n          <GridItem rowSpan={{ base: 1, xl: 7 }} colSpan={{ base: 8, xl: 2 }} bg=\"gray.600\">\n            참가자 목록\n          </GridItem>\n\n          <GridItem rowSpan={{ base: 4, md: 7 }} colSpan={{ base: 8, md: 5, xl: 4 }} bg=\"white\">\n            <Text fontSize=\"6xl\" color=\"#000\">\n              drawing~\n            </Text>\n          </GridItem>\n\n          <GridItem rowSpan={{ base: 2, md: 7 }} colSpan={{ base: 8, md: 3, xl: 2 }} bg=\"teal\">\n            채팅\n          </GridItem>\n        </Grid>\n      </Container>\n    </PageTemplate>\n  );\n};\n\nexport default Room;\n","import React, { useState, useCallback, useEffect, useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Container,\n  Heading,\n  Stack,\n  Box,\n  Input,\n  Button,\n  RadioGroup,\n  Radio,\n  Divider,\n  Grid,\n  GridItem,\n  IconButton,\n  Text,\n} from '@chakra-ui/react';\nimport { BsArrowRightCircleFill, BsArrowLeft, BsArrowRight } from 'react-icons/bs';\nimport { GiPerspectiveDiceSixFacesRandom } from 'react-icons/gi';\nimport { motion, useAnimation } from 'framer-motion';\n\nimport PageTemplate from '../../components/PageTemplate';\n\nimport './index.scss';\n\nconst PROFILE_CHARACTERS = ['🐶', '🐱', '🐰', '🦊', '🐨', '🐼', '🐯', '🐥', '🐷'];\n\nconst roomId = 'abc';\n\nconst Setting = () => {\n  const navigate = useNavigate();\n  const enterRoom = useCallback(() => {\n    navigate(`/room/${roomId}`);\n  }, [navigate]);\n\n  const [drawTime, setDrawTime] = useState('60');\n  const [round, setRound] = useState('10');\n  const [myProfileIdx, setMyProfileIdx] = useState(1);\n\n  // 프로필 설정 애니메이션\n  const controls = useAnimation();\n  useEffect(() => {\n    controls.start({\n      opacity: [0.5, 1],\n      scale: [0.7, 1.1, 1],\n      y: [15, -10, 0],\n      transition: {\n        delay: 1,\n        x: { type: 'spring', stiffness: 50, velocity: 50 },\n        default: { duration: 0.5 },\n      },\n    });\n  }, [myProfileIdx, controls]);\n\n  const getRandomProfile = useCallback(() => {\n    const randomIdx = Math.floor(Math.random() * PROFILE_CHARACTERS.length);\n    setMyProfileIdx(randomIdx);\n  }, [setMyProfileIdx]);\n\n  const handlePrevProfile = useCallback(() => {\n    setMyProfileIdx((myProfileIdx) => myProfileIdx - 1);\n  }, [setMyProfileIdx]);\n\n  const handleNextProfile = useCallback(() => {\n    setMyProfileIdx((myProfileIdx) => myProfileIdx + 1);\n  }, [setMyProfileIdx]);\n\n  const isPrevDisabled = useMemo(() => myProfileIdx === 0, [myProfileIdx]);\n  const isNextDisabled = useMemo(() => myProfileIdx === PROFILE_CHARACTERS.length - 1, [myProfileIdx]);\n\n  /**\n   * @TODO\n   * 닉네임 입력\n   * - 입장하기 버튼 활성화 조건 체크\n   * - 중복여부\n   */\n  const [userName, setUserName] = useState('');\n  const handleUserName = useCallback(\n    (e) => {\n      setUserName(e.target.value);\n    },\n    [setUserName]\n  );\n\n  const isUserName = useMemo(() => userName !== '', [userName]);\n\n  return (\n    <PageTemplate id=\"setting\">\n      <Container p=\"20px\" centerContent>\n        <Box maxW=\"3xl\">\n          <Stack spacing={5} mt={50}>\n            <Heading as=\"h1\" size=\"xl\">\n              프로필 설정\n            </Heading>\n            <Input onInput={handleUserName} value={userName} variant=\"outline\" placeholder=\"닉네임\" />\n\n            <Grid templateColumns=\"repeat(5, 1fr)\" alignItems=\"center\" gap={6}>\n              <IconButton\n                colorScheme=\"teal\"\n                aria-label=\"이전\"\n                icon={<BsArrowLeft />}\n                disabled={isPrevDisabled}\n                onClick={handlePrevProfile}\n              />\n              <GridItem colSpan={3} textAlign=\"center\">\n                <motion.div animate={controls}>\n                  <Text fontSize=\"7xl\">{PROFILE_CHARACTERS[myProfileIdx]}</Text>\n                </motion.div>\n              </GridItem>\n\n              <IconButton\n                colorScheme=\"teal\"\n                aria-label=\"다음\"\n                icon={<BsArrowRight />}\n                disabled={isNextDisabled}\n                onClick={handleNextProfile}\n              />\n            </Grid>\n            <Button\n              rightIcon={<GiPerspectiveDiceSixFacesRandom />}\n              onClick={getRandomProfile}\n              colorScheme=\"teal\"\n              size=\"lg\"\n              variant=\"outline\"\n            >\n              랜덤 프로필\n            </Button>\n          </Stack>\n\n          <Stack spacing={5} mt={50}>\n            <Heading as=\"h2\" size=\"md\">\n              게임 설정\n            </Heading>\n\n            <Divider />\n            <Grid templateColumns=\"repeat(2, 1fr)\" gap={6}>\n              <Heading as=\"h3\" size=\"sm\">\n                그리는 시간\n              </Heading>\n\n              <RadioGroup colorScheme=\"teal\" onChange={setDrawTime} value={drawTime}>\n                <Stack direction=\"row\" spacing={5}>\n                  <Radio value=\"30\">30초</Radio>\n                  <Radio value=\"60\">1분</Radio>\n                  <Radio value=\"120\">2분</Radio>\n                </Stack>\n              </RadioGroup>\n            </Grid>\n\n            <Grid templateColumns=\"repeat(2, 1fr)\" gap={6}>\n              <Heading as=\"h3\" size=\"sm\">\n                라운드 수\n              </Heading>\n\n              <RadioGroup colorScheme=\"teal\" onChange={setRound} value={round}>\n                <Stack direction=\"row\" spacing={5}>\n                  <Radio value=\"5\">5</Radio>\n                  <Radio value=\"10\">10</Radio>\n                  <Radio value=\"15\">15</Radio>\n                </Stack>\n              </RadioGroup>\n            </Grid>\n\n            <Button\n              rightIcon={<BsArrowRightCircleFill />}\n              colorScheme=\"teal\"\n              size=\"lg\"\n              variant=\"solid\"\n              onClick={enterRoom}\n              disabled={!isUserName}\n            >\n              입장하기\n            </Button>\n          </Stack>\n        </Box>\n      </Container>\n    </PageTemplate>\n  );\n};\n\nexport default Setting;\n","type Cursor = {\n  x: number;\n  y: number;\n};\n\nexport type Config = Record<string, any>;\n\ntype ToolConstructorParams = {\n  canvas: HTMLCanvasElement;\n  context: CanvasRenderingContext2D;\n  config?: Config;\n};\n\nexport type DoItParams = {\n  context: CanvasRenderingContext2D;\n  config?: Config;\n  cursor: Cursor;\n};\n\ntype MouseEventHandler = (e: MouseEvent) => void;\n\nexport class Tool {\n  private context: CanvasRenderingContext2D;\n  private canvas: HTMLCanvasElement;\n  private config: Config | undefined;\n  private isDragging = false;\n  private cursor: Cursor = {\n    x: -1,\n    y: -1,\n  };\n  private enabled = false;\n  private mouseDownHandler: MouseEventHandler | null = null;\n  private mouseMoveHandler: MouseEventHandler | null = null;\n  private mouseUpHandler: MouseEventHandler | null = null;\n\n  constructor({ canvas, context, config }: ToolConstructorParams) {\n    this.canvas = canvas;\n    this.context = context;\n    this.config = config;\n    this.init();\n  }\n\n  init() {\n    this.mouseDownHandler = this.onMousedown.bind(this);\n    this.mouseMoveHandler = this.onMousemove.bind(this);\n    this.mouseUpHandler = this.onMouseup.bind(this);\n  }\n\n  beforeDo() {\n    if (!this.context) {\n      console.error('컨텍스트를 찾을 수 없습니다.');\n      return;\n    }\n\n    this.context.beginPath();\n  }\n\n  do() {\n    this.beforeDo();\n    this.doIt({\n      context: this.context,\n      config: this.config,\n      cursor: this.cursor,\n    });\n    this.afterDo();\n  }\n\n  afterDo() {\n    if (!this.context) {\n      console.error('컨텍스트를 찾을 수 없습니다.');\n      return;\n    }\n\n    this.context.closePath();\n  }\n\n  doIt({ context, config, cursor }: DoItParams) {\n    console.warn('It must be implemented!');\n  }\n\n  enable() {\n    if (this.enabled) {\n      return;\n    }\n\n    this.enabled = true;\n    this.registerEventHander();\n  }\n\n  setConfig(config: Config) {\n    const newConf = {\n      ...this.config,\n      ...config,\n    };\n\n    this.config = newConf;\n  }\n\n  disable() {\n    if (!this.enabled) {\n      return;\n    }\n\n    this.enabled = false;\n    this.unregisterEventHandler();\n  }\n\n  registerEventHander() {\n    if (!(this.mouseDownHandler && this.mouseMoveHandler && this.mouseUpHandler)) {\n      return;\n    }\n\n    this.canvas.addEventListener('mousedown', this.mouseDownHandler);\n    this.canvas.addEventListener('mousemove', this.mouseMoveHandler);\n    this.canvas.addEventListener('mouseup', this.mouseUpHandler);\n  }\n\n  unregisterEventHandler() {\n    if (!(this.mouseDownHandler && this.mouseMoveHandler && this.mouseUpHandler)) {\n      return;\n    }\n\n    this.canvas.removeEventListener('mousedown', this.mouseDownHandler);\n    this.canvas.removeEventListener('mousemove', this.mouseMoveHandler);\n    this.canvas.removeEventListener('mouseup', this.mouseUpHandler);\n  }\n\n  onMousedown(e: MouseEvent) {\n    console.log(e);\n    const { offsetX: x, offsetY: y } = e;\n    this.isDragging = true;\n\n    this.cursor = {\n      x,\n      y,\n    };\n\n    this.do();\n  }\n\n  onMousemove(e: MouseEvent) {\n    if (!this.isDragging) {\n      return;\n    }\n\n    const { offsetX: x, offsetY: y } = e;\n\n    this.cursor = {\n      x,\n      y,\n    };\n\n    this.do();\n  }\n\n  onMouseup(e: MouseEvent) {\n    this.isDragging = false;\n  }\n\n  dispose() {\n    this.unregisterEventHandler();\n    this.mouseDownHandler = null;\n    this.mouseMoveHandler = null;\n    this.mouseUpHandler = null;\n  }\n}\n","import { Tool, DoItParams } from './tool';\n\nconst PEN_SIZE_FACTOR = 1;\nconst DEFAULT_FILL_COLOR = 'black';\n\nexport class Pen extends Tool {\n  doIt({ context, cursor, config }: DoItParams) {\n    const size = config?.['size'];\n    const fillStyle = config?.['color'] || DEFAULT_FILL_COLOR;\n\n    const penSize = size * PEN_SIZE_FACTOR;\n    const { x, y } = cursor;\n\n    const centerX = x - penSize / 2;\n    const centerY = y - penSize / 2;\n\n    context.fillStyle = fillStyle;\n    context.ellipse(centerX, centerY, penSize, penSize, 0, 0, 2 * Math.PI);\n    context.fill();\n  }\n}\n","import { ChangeEvent, useCallback, useEffect, useState } from 'react';\nimport './index.scss';\n\ntype Props = {\n  initialColor?: string;\n  colorChangeCallback?: (color: string) => void;\n};\n\nconst ColorPicker = ({ initialColor = 'black', colorChangeCallback }: Props) => {\n  const [color, setColor] = useState<string>(initialColor);\n\n  const onColorChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    const currentColor = e.target.value;\n    setColor(currentColor);\n  }, []);\n\n  useEffect(() => {\n    colorChangeCallback?.(color);\n  }, [colorChangeCallback, color]);\n\n  return (\n    <div className=\"color-picker\">\n      <input type=\"color\" onChange={onColorChange} value={color} />\n    </div>\n  );\n};\n\nexport default ColorPicker;\n","import { ChangeEvent, useCallback, useEffect, useState } from 'react';\nimport './index.scss';\n\ntype Props = {\n  initialSize?: number;\n  incrementSize?: number;\n  minSize?: number;\n  maxSize?: number;\n  sizeChangeCallback?: (size: number) => void;\n};\n\nconst ToolSizeSelector = ({\n  initialSize = 1,\n  incrementSize = 1,\n  minSize = 1,\n  maxSize = Infinity,\n  sizeChangeCallback,\n}: Props) => {\n  const [size, setSize] = useState<number>(initialSize);\n\n  const onSizeChangeButtonClick = useCallback(\n    (direction: 'forward' | 'backward') => {\n      setSize((s) => {\n        const nextSize = s + (direction === 'backward' ? incrementSize * -1 : incrementSize);\n\n        if (minSize > nextSize) {\n          return minSize;\n        }\n        if (nextSize > maxSize) {\n          return maxSize;\n        }\n\n        return nextSize;\n      });\n    },\n    [setSize, incrementSize, minSize, maxSize]\n  );\n\n  const onSizeInputChange = useCallback(\n    (e: ChangeEvent<HTMLInputElement>) => {\n      const currentSize = +e.target.value;\n      if (minSize > currentSize) {\n        setSize(minSize);\n        return;\n      }\n      if (currentSize < maxSize) {\n        return setSize(maxSize);\n      }\n\n      setSize(currentSize);\n    },\n    [minSize, maxSize]\n  );\n\n  useEffect(() => {\n    sizeChangeCallback?.(size);\n  }, [sizeChangeCallback, size]);\n\n  return (\n    <div className=\"tool-size-selector\">\n      <button className=\"minus\" onClick={() => onSizeChangeButtonClick('backward')}>\n        -\n      </button>\n      <input type=\"number\" onChange={onSizeInputChange} value={size} />\n      <button className=\"plus\" onClick={() => onSizeChangeButtonClick('forward')}>\n        +\n      </button>\n    </div>\n  );\n};\n\nexport default ToolSizeSelector;\n","import { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport PageTemplate from 'components/PageTemplate';\nimport { Pen, Tool } from 'core/tools';\nimport ColorPicker from './components/ColorPicker';\nimport ToolSizeSelector from './components/ToolSizeSelector';\n\nimport './index.scss';\n\nconst PracticeRoom = () => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const [currentTool, setCurrentTool] = useState<Tool | undefined>();\n\n  useEffect(() => {\n    if (!canvasRef.current) {\n      return;\n    }\n\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n\n    if (!context) {\n      console.error('컨텍스트를 가져오는데에 실패하였습니다.');\n      return;\n    }\n\n    setCurrentTool((lastTool: Tool | undefined) => {\n      lastTool?.disable();\n\n      return new Pen({\n        canvas,\n        context,\n        config: {\n          size: 5,\n        },\n      });\n    });\n  }, [setCurrentTool]);\n\n  useEffect(() => {\n    currentTool?.enable();\n  }, [currentTool]);\n\n  const { canvasWidth, canvasHeight } = useMemo(() => {\n    return {\n      canvasWidth: window.innerWidth * 0.8,\n      canvasHeight: window.innerHeight * 0.8,\n    };\n  }, []);\n\n  const onSizeChange = useCallback(\n    (size: number) => {\n      currentTool?.setConfig({\n        size,\n      });\n    },\n    [currentTool]\n  );\n\n  const onColorChange = useCallback(\n    (color: string) => {\n      currentTool?.setConfig({\n        color,\n      });\n    },\n    [currentTool]\n  );\n\n  return (\n    <PageTemplate id=\"practice-room\">\n      <div>\n        <canvas ref={canvasRef} width={canvasWidth} height={canvasHeight} />\n      </div>\n      <ToolSizeSelector sizeChangeCallback={onSizeChange} />\n      <ColorPicker colorChangeCallback={onColorChange} />\n    </PageTemplate>\n  );\n};\n\nexport default PracticeRoom;\n","import { Provider } from 'react-redux';\nimport { Routes, Route } from 'react-router-dom';\nimport { ChakraProvider } from '@chakra-ui/react';\nimport { store } from './store';\nimport Home from 'pages/Home';\nimport Room from 'pages/Room';\nimport Setting from 'pages/Setting';\nimport PracticeRoom from 'pages/PracticeRoom';\n\nconst App = () => {\n  return (\n    <Provider store={store}>\n      <ChakraProvider>\n        <Routes>\n          <Route path=\"/\" element={<Home />} />\n          <Route path=\"/room/:roomId\" element={<Room />} />\n          <Route path=\"/setting\" element={<Setting />} />\n          <Route path=\"/practice-room\" element={<PracticeRoom />} />\n        </Routes>\n      </ChakraProvider>\n    </Provider>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport App from './App';\n\nimport './styles/index.scss';\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}